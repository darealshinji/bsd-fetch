CC=			@CC@
CFLAGS=		-Wall -Wno-unused-result -I. -Iinc -Ilibfetch @CFLAGS@
CPPFLAGS=	@CPPFLAGS@ -DHAVE_CONFIG_H
LDFLAGS=	@LDFLAGS@
LIBS=		@LIBS@

OBJS=		libfetch/fetch.o libfetch/common.o libfetch/ftp.o libfetch/http.o libfetch/file.o fetch/fetch.o
PROG=		fetch/fetch


all: $(PROG)

clean:
	-rm -f $(OBJS) $(PROG) ftperr.h httperr.h

distclean: clean
	-rm -f Makefile config.log config.status config.h

maintainer-clean: distclean
	-rm -rf autom4te.cache
	-rm -f config.guess config.sub config.h.in config.h.in~ configure configure~

$(PROG): $(OBJS)
	$(CC) -o $(PROG) $^ $(LDFLAGS) $(LIBS)

libfetch/ftp.o: ftperr.h
libfetch/http.o: httperr.h

ftperr.h:
	$(SHELL) libfetch/errlist.sh ftp_errlist FTP libfetch/ftp.errors > $@

httperr.h:
	$(SHELL) libfetch/errlist.sh http_errlist HTTP libfetch/http.errors > $@

